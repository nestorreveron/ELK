
# üõ†Ô∏è Laboratorio: Configuraci√≥n de CloudWatch para Monitorear EC2, RDS y Lambda

## üìã Objetivo

Configurar CloudWatch para monitorear instancias EC2, bases de datos RDS y funciones Lambda, crear dashboards y alarmas, y validar que los datos fluyen y se visualizan correctamente.

---

## üìù Prerrequisitos

* Cuenta activa en AWS (con permisos de IAM para EC2, RDS, Lambda, CloudWatch)
* Al menos una instancia EC2, una base de datos RDS y una funci√≥n Lambda disponibles
* Acceso a la consola de AWS y a la CLI (opcional)

---

## ‚öôÔ∏è Paso 1: Configuraci√≥n de Monitoreo en EC2

### **A) Habilitar monitoreo detallado en EC2**

1. Ve a la consola de AWS ‚Üí **EC2 ‚Üí Instances**.
2. Selecciona tu instancia.
3. Haz clic en **Actions > Monitor and troubleshoot > Enable detailed monitoring**.
4. Confirma la activaci√≥n.

Esto permite recopilar m√©tricas cada 1 minuto (por defecto es cada 5).

### **B) Verificar m√©tricas en CloudWatch**

1. Ve a **CloudWatch > Metrics > EC2 > Per-Instance Metrics**.
2. Busca m√©tricas clave como:

   * CPUUtilization
   * DiskReadOps
   * NetworkIn/Out

---

## ‚öôÔ∏è Paso 2: Configuraci√≥n de Monitoreo en RDS

### **A) Habilitar Enhanced Monitoring**

1. Ve a **RDS > Databases**, selecciona tu instancia.
2. Haz clic en **Modify**.
3. En **Monitoring**, activa **Enhanced monitoring** y selecciona el nivel de detalle (por ejemplo, 1 minuto).
4. Aplica los cambios (esto puede reiniciar la instancia).

### **B) Visualizar m√©tricas en CloudWatch**

1. Ve a **CloudWatch > Metrics > RDS**.
2. Encuentra m√©tricas como:

   * CPUUtilization
   * FreeableMemory
   * ReadIOPS / WriteIOPS

---

## ‚öôÔ∏è Paso 3: Configuraci√≥n de Monitoreo en Lambda

1. Ve a **Lambda > Functions**, selecciona tu funci√≥n.
2. Ejecuta varias invocaciones para generar actividad.
3. Ve a **Monitoring** en la funci√≥n Lambda para ver m√©tricas r√°pidas.
4. Accede a **CloudWatch > Metrics > Lambda** para m√©tricas m√°s detalladas:

   * Invocations
   * Duration
   * Errors
   * Throttles

---

## ‚öôÔ∏è Paso 4: Consultar Logs en CloudWatch Logs

* Para **EC2**: Instala y configura el **CloudWatch Agent** para enviar logs del sistema.
* Para **RDS**: Habilita exportaci√≥n de logs en los par√°metros de la instancia.
* Para **Lambda**: Los logs se env√≠an autom√°ticamente a CloudWatch Logs en el grupo `/aws/lambda/<function_name>`.

### **Ver logs en CloudWatch**

1. Ve a **CloudWatch > Logs > Log groups**.
2. Selecciona el grupo correspondiente para revisar logs en tiempo real.

---

## ‚öôÔ∏è Paso 5: Crear dashboards personalizados en CloudWatch

1. Ve a **CloudWatch > Dashboards > Create dashboard**.
2. Elige un nombre y agrega widgets:

   * Gr√°ficos de CPU de EC2, errores de Lambda, conexiones de RDS.
   * Tablas, mapas, gauges, etc.
3. Guarda y comparte tu dashboard con el equipo.

---

## ‚öôÔ∏è Paso 6: Configurar alarmas en CloudWatch

### **A) Crear una alarma para EC2 (ejemplo CPU > 80%)**

1. Ve a **CloudWatch > Alarms > Create alarm**.
2. Elige la m√©trica `CPUUtilization` de tu instancia EC2.
3. Define la condici√≥n: **Greater/Equal 80%** por m√°s de 5 minutos.
4. Configura una acci√≥n (enviar notificaci√≥n a SNS, correo, ejecutar una Lambda).
5. Nombra y crea la alarma.

### **B) Crear alarmas similares para RDS y Lambda**

* RDS: Por ejemplo, `FreeStorageSpace < 1000 MB`.
* Lambda: Por ejemplo, `Errors > 0` o `Duration > 1000 ms`.

---

## ‚öôÔ∏è Paso 7: Automatizaci√≥n b√°sica con EventBridge (opcional)

1. Ve a **EventBridge > Rules > Create rule**.
2. Define un patr√≥n (por ejemplo, cualquier cambio de estado de EC2 o RDS).
3. Elige como acci√≥n ejecutar una funci√≥n Lambda (remediaci√≥n autom√°tica, notificaci√≥n, etc.).

---

## üö¶ **Validaci√≥n**

* Genera actividad en las instancias para probar que las m√©tricas y logs aparecen en los dashboards y que las alarmas se disparan.
* Verifica que recibes notificaciones o que las acciones configuradas se ejecutan.

---

## üöÆ Limpieza (opcional)

* Elimina alarmas y dashboards si no los necesitas m√°s.
* Det√©n o termina recursos usados para evitar costos inesperados.

---

## üìå Buenas pr√°cticas

* Usa etiquetas (tags) en todos los recursos para facilitar b√∫squeda y organizaci√≥n en m√©tricas/logs.
* Revisa y ajusta las alarmas peri√≥dicamente para evitar ruido excesivo.
* Comparte dashboards con los equipos adecuados para promover monitoreo colaborativo.

---

¬°Laboratorio completo! üöÄ Ahora tienes CloudWatch configurado para monitorear servicios cr√≠ticos en AWS.

