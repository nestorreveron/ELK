ğŸ§‘â€ğŸ’» Laboratorio Opcional Avanzado: AnÃ¡lisis avanzado y visualizaciones interactivas en Kibana

ğŸ“‹ Objetivo

Explorar funcionalidades avanzadas de Kibana:

Visualizaciones avanzadas (TSVB, mapas, gauges, etc.)

Uso de filtros y dashboards dinÃ¡micos

Uso avanzado de KQL (Kibana Query Language)

CreaciÃ³n de alertas bÃ¡sicas (si la versiÃ³n de Kibana lo permite)

PersonalizaciÃ³n e interacciÃ³n entre visualizaciones

ğŸ“ Requisitos previos
Haber completado el Lab02 (Kibana operativo con datos reales en Elasticsearch).

Acceso al portal web de Kibana desde tu navegador.

âš™ï¸ Paso 1: Crear visualizaciones avanzadas
A. Time Series Visual Builder (TSVB)
Ve a Analytics â†’ Visualize Library â†’ Create visualization.

Elige Time Series o TSVB.

Configura el panel:

En Panel options elige el Ã­ndice.

En Metrics, selecciona una mÃ©trica (ejemplo: average, sum, count).

En Data, configura intervalos de tiempo y agrega una moving average o mÃ©trica derivada.

Prueba agregando series adicionales para comparar tendencias (por ejemplo, comparaciÃ³n de status:200 vs status:500).

Guarda la visualizaciÃ³n como â€œTime Series Analysisâ€.

B. Geospatial Maps (si tienes datos geogrÃ¡ficos)
Ve a Visualize Library â†’ Create visualization â†’ Maps.

Elige el Ã­ndice que contenga datos de geolocalizaciÃ³n (geo_point o location).

Crea un mapa de puntos o coropletas:

Por ejemplo, eventos por paÃ­s, ciudad o coordenadas.

Ajusta capas, estilos y leyendas.

Guarda la visualizaciÃ³n como â€œGeographical Events Mapâ€.

C. Gauges and Goals
En Create visualization, selecciona Gauge o Goal.

Configura el KPI a monitorear:

Por ejemplo, el porcentaje de logs con status:200 sobre el total.

Define valores mÃ­nimos, mÃ¡ximos y umbrales (ejemplo: rojo <95%, amarillo 95-99%, verde >99%).

Guarda como â€œUptime Gaugeâ€.

D. Scatterplots o Heatmaps (relaciones complejas)
Elige Heatmap o Scatterplot.

Visualiza relaciones entre dos campos, por ejemplo:

Cantidad de logs por hora del dÃ­a y tipo de error.

RelaciÃ³n entre bytes transferidos y cÃ³digo de status.

âš™ï¸ Paso 2: Interactividad y filtros avanzados en dashboards
Crea un nuevo Dashboard Avanzado.

AÃ±ade tus nuevas visualizaciones avanzadas.

Prueba:

Filtrar el dashboard por un campo global (ej: solo una empresa, solo errores).

Usar drilldowns si Kibana lo permite: hacer clic en una barra/Ã¡rea y ver cÃ³mo se filtran todos los paneles automÃ¡ticamente.

Cambiar el rango de fechas global y observar el efecto en las mÃ©tricas.

âš™ï¸ Paso 3: Uso avanzado de KQL
Prueba bÃºsquedas con KQL avanzado:

Rango de fechas:

timestamp >= "2024-05-01" AND timestamp <= "2024-05-31"
Existencia de campos:

_exists_: user_agent AND status: "404"
Consultas anidadas:

(status: "500" AND extension: "php") OR (bytes > 10000 AND status: "200")
Observa cÃ³mo se afectan dinÃ¡micamente todas las visualizaciones del dashboard.

âš™ï¸ Paso 4: CreaciÃ³n de alertas bÃ¡sicas (si tu versiÃ³n de Kibana lo soporta)
Ve a Stack Management â†’ Alerts and Actions.

Crea una alerta sobre un Ã­ndice, por ejemplo:

Enviar alerta cuando el porcentaje de errores (status: 500) supere cierto umbral en los Ãºltimos 5 minutos.

Configura la acciÃ³n: email, log, webhook (segÃºn tus permisos).

Observa la integraciÃ³n de alertas en tus dashboards.

âš™ï¸ Paso 5: Exporta, documenta y comparte
Exporta tu dashboard avanzado como PDF o imagen.

Documenta cada panel: Â¿quÃ© visualizas? Â¿quÃ© preguntas responde? Â¿quÃ© hallazgos detectaste?

Comparte el enlace o archivo exportado con el equipo/instructor.

ğŸš€ DesafÃ­o extra (para usuarios avanzados):
Crea un panel de troubleshooting: Un solo dashboard que te ayude a identificar de inmediato cualquier anomalÃ­a en la operaciÃ³n de una aplicaciÃ³n.

Combina mÃ©tricas de logs y de infraestructura (si tienes mÃ©tricas en Elasticsearch), cruzando eventos crÃ­ticos con uso de recursos.

ğŸš® Limpieza (Opcional)
Si creaste alertas o dashboards temporales, elimÃ­nalos si no los vas a usar.

Recuerda cerrar sesiones y restringir el puerto 5601 si termina la prÃ¡ctica.

ğŸ“Œ Tips avanzados
Aprovecha los tooltips y documentaciÃ³n de cada visualizaciÃ³n en Kibana.

Explora la pestaÃ±a Inspect para ver la query subyacente a cada visualizaciÃ³n.

Usa la opciÃ³n de Save as new para experimentar sin perder tus paneles originales.
