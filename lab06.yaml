
---

# ğŸ› ï¸ Laboratorio: SimulaciÃ³n y ResoluciÃ³n de Problemas de Rendimiento con Dynatrace AI (Davis)

## ğŸ“‹ Objetivo

Simular un problema de rendimiento en una VM Azure monitorizada por Dynatrace, observar la detecciÃ³n automÃ¡tica, analizar la causa raÃ­z con Davis AI, y practicar la resoluciÃ³n y documentaciÃ³n del incidente.

---

## ğŸ“ Requisitos previos

* VM Azure monitorizada por Dynatrace OneAgent.
* Acceso al portal de Dynatrace.
* Acceso SSH o RDP a la VM.
* Permisos para modificar o detener procesos en la VM.

---

## âš™ï¸ Paso 1: Acceso y verificaciÃ³n inicial

1. Ingresa al [portal Dynatrace](https://{your-environment-id}.live.dynatrace.com).
2. Busca tu VM en **Infrastructure â†’ Hosts**.
3. Confirma que los datos y mÃ©tricas se estÃ©n actualizando en tiempo real.

---

## âš™ï¸ Paso 2: SimulaciÃ³n de un problema de alto consumo de CPU

**En una VM Ubuntu Linux:**

1. ConÃ©ctate vÃ­a SSH:

   ```bash
   ssh usuario@<ip-publica-vm>
   ```

2. Genera una carga alta de CPU (puedes usar `stress`):

   * Instala `stress` si no lo tienes:

     ```bash
     sudo apt update
     sudo apt install stress -y
     ```

   * Lanza la carga (ajusta el nÃºmero de CPU segÃºn tu VM):

     ```bash
     stress --cpu 2 --timeout 300
     ```

   Esto simula un uso intenso de CPU durante 5 minutos.

**En Windows:**

1. Abre el Administrador de tareas y ejecuta varias instancias de una app que consuma CPU (p. ej., calculadora con operaciones pesadas o un script en bucle).

OpciÃ³n 1:

Powershell:

while ($true) { [Math]::Sqrt(999999) }

OpciÃ³n 2: 

https://learn.microsoft.com/en-us/sysinternals/downloads/sysinternals-suite

CPUSTRES.exe

**AKS**
Opcion 1:

Prueba de stress desde el kubernetes

1.- kubectl run stress-ng --rm -it --image=alpine --namespace=default -- /bin/sh

2.-

apk add --no-cache stress
# Consumir 2 CPUs por 5 minutos:
stress --cpu 2 --timeout 300

OpciÃ³n 2:

Acceder al contenedor NGINX y generar carga desde dentro (si el contenedor tiene bash o sh):

kubectl exec -it <nginx-pod-name> -- /bin/sh
# (Si tienes Alpine, instala stress si es posible)
apk add --no-cache stress
stress --cpu 1 --timeout 120


---

## âš™ï¸ Paso 3: Observa la alerta automÃ¡tica en Dynatrace

1. Vuelve al portal Dynatrace.
2. Ve a **Problems** (barra lateral izquierda).
3. DeberÃ­as ver un problema generado por alto uso de CPU.
4. Haz clic en el problema para ver el anÃ¡lisis de Davis AI:

   * DescripciÃ³n del problema.
   * Entidades afectadas (host, procesos).
   * LÃ­nea de tiempo y duraciÃ³n.
   * Sugerencias de resoluciÃ³n y causa raÃ­z.

---

## âš™ï¸ Paso 4: Analiza el incidente y documenta

1. Lee atentamente la explicaciÃ³n de Davis AI.
2. Identifica la causa raÃ­z sugerida (por ejemplo, â€œConsumo excesivo de CPU en proceso Xâ€).
3. Documenta:

   * Â¿CuÃ¡l fue el sÃ­ntoma?
   * Â¿QuÃ© causa raÃ­z detectÃ³ Dynatrace?
   * Â¿CuÃ¡les fueron las recomendaciones de remediaciÃ³n?

---

## âš™ï¸ Paso 5: Resolver el incidente

1. DetÃ©n el proceso que genera carga si aÃºn no ha terminado.

   * Para `stress` en Linux:

     ```bash
     sudo pkill stress
     ```

   * En Windows, cierra las aplicaciones de prueba.

2. Espera unos minutos.

3. Dynatrace debe detectar la recuperaciÃ³n automÃ¡ticamente y cerrar el problema.

---

## âš™ï¸ Paso 6: Crea un dashboard y SLO relevante

1. En **Dashboards** en Dynatrace, crea un nuevo panel llamado â€œMonitoreo de rendimiento VMâ€.
2. AÃ±ade widgets de CPU, memoria y alertas recientes.
3. Ve a **Service-level objectives** y crea un SLO para CPU (< 80% de uso promedio en la Ãºltima hora).
4. Guarda y visualiza el cumplimiento del SLO.

---

## âš™ï¸ Paso 7: ReflexiÃ³n y limpieza

* Reflexiona: Â¿quÃ© tan rÃ¡pido detectÃ³ Dynatrace el incidente? Â¿QuÃ© tan clara fue la explicaciÃ³n de Davis AI?
* Guarda capturas de pantalla como evidencia para el reporte.
* Si no lo harÃ¡s mÃ¡s, detÃ©n o elimina la VM para ahorrar recursos en Azure.

---

## ğŸ“Œ Recomendaciones

* Prueba crear alertas personalizadas de umbral para otras mÃ©tricas (memoria, disco, errores HTTP).
* Repite la simulaciÃ³n usando diferentes procesos o errores (por ejemplo, detener un servicio web).
* Explora el historial de problemas detectados y cÃ³mo se relacionan con los SLO definidos.

---

Â¡Laboratorio completo! ğŸš€ Has practicado la simulaciÃ³n, detecciÃ³n y resoluciÃ³n de problemas con la inteligencia artificial de Dynatrace, y has reforzado el monitoreo avanzado de entornos cloud modernos.
