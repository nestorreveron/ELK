
##  **Retos Avanzados: Integraciones Cloud-Native con Dynatrace en Azure**

---

### **1. Integraci贸n con Azure Monitor y Log Analytics**

**Objetivo:** Visualizar y correlacionar datos de m茅tricas y logs recolectados por Azure Monitor y Log Analytics directamente desde Dynatrace.

* **Pasos sugeridos:**

  1. En Dynatrace, navega a **Settings > Cloud and virtualization > Azure**.
  2. Usa el asistente para autorizar tu suscripci贸n de Azure, creando un registro de aplicaci贸n (App registration) en Azure AD, y proveyendo el tenant ID, client ID y client secret.
  3. Selecciona los recursos y servicios a monitorizar (por ejemplo, VMs, App Services, SQL Databases, etc.).
  4. Espera a que la integraci贸n sincronice los recursos.
  5. En Dynatrace, ve a **Infrastructure** y observa c贸mo los recursos de Azure se correlacionan con los hosts y servicios donde tienes instalado OneAgent.
  6. **Explora:** Compara la visualizaci贸n y las alertas entre Dynatrace y Azure Monitor/Log Analytics para el mismo recurso.

---

### **2. Integraci贸n con AKS (Azure Kubernetes Service) y Kubernetes autogestionado en Azure**

**Objetivo:** Monitorear cl煤steres Kubernetes en Azure (AKS o clusters autogestionados) usando Dynatrace OneAgent Operator, con auto-instrumentaci贸n de aplicaciones y visualizaci贸n completa.

* **Pasos sugeridos:**

  1. Si tienes un cl煤ster AKS (o puedes crear uno peque帽o), sigue la https://docs.dynatrace.com/docs/ingest-from/microsoft-azure-services/azure-integrations/azure-aks .
  2. Instala el Dynatrace OneAgent Operator en el cl煤ster:

     ```bash
     kubectl create namespace dynatrace
     kubectl apply -f https://github.com/Dynatrace/dynatrace-operator/releases/latest/download/kubernetes.yaml
     ```
  3. Proporciona el API URL y token de Dynatrace (lo obtienes de tu entorno Dynatrace SaaS).
  4. Valida en Dynatrace c贸mo aparecen los nodos, pods, namespaces y servicios del cluster de AKS.
  5. Despliega una app demo (por ejemplo, nginx o una app de ejemplo oficial de Microsoft).
  6. Observa las m茅tricas, trazas y auto-discovery de microservicios en el panel **Smartscape** de Dynatrace.
  7. **Extra:** Simula un fallo (por ejemplo, det茅n un pod o genera alto consumo de recursos) y analiza las alertas generadas.

---

### **3. Integraci贸n con Prometheus y Scraping de M茅tricas Custom en Azure**

**Objetivo:** Que Dynatrace recoja y visualice m茅tricas personalizadas expuestas por aplicaciones o exporters Prometheus desplegados en tus VMs o cl煤ster de AKS en Azure.

* **Pasos sugeridos:**

  1. Despliega un exporter de Prometheus en tu VM o AKS (ejemplo: `node_exporter` o un exporter de tu app).

     ```bash
     wget https://github.com/prometheus/node_exporter/releases/download/v*/node_exporter-*.linux-amd64.tar.gz
     tar -xvf node_exporter-*.tar.gz
     ./node_exporter &
     ```

     O, en Kubernetes:

     ```bash
     kubectl apply -f https://raw.githubusercontent.com/prometheus/node_exporter/master/examples/node-exporter-full.yaml
     ```
  2. En Dynatrace, ve a **Settings > Cloud and virtualization > Prometheus**.
  3. Agrega la URL del endpoint Prometheus (por ejemplo, `http://<vm_ip>:9100/metrics` o el endpoint del servicio en AKS).
  4. Visualiza en Dynatrace c贸mo aparecen estas m茅tricas (busca por nombre, tipo, y explora gr谩ficos).
  5. **Extra:** Crea una alerta basada en una m茅trica de Prometheus (por ejemplo, si la memoria supera cierto umbral).

---

### **4. Integraci贸n con OpenTelemetry en Azure**

**Objetivo:** Recibir y analizar datos de trazas, logs o m茅tricas desde aplicaciones instrumentadas con OpenTelemetry y desplegadas en Azure (VMs o AKS).

* **Pasos sugeridos:**

  1. Instrumenta una aplicaci贸n demo en Azure (puede ser Node.js, Python, Java, etc.) usando el SDK oficial de OpenTelemetry.
  2. Configura el agente/collector OpenTelemetry para enviar datos a Dynatrace usando el endpoint OTLP de tu entorno (ver [documentaci贸n oficial](https://www.dynatrace.com/support/help/shortlink/otlp-ingest)).
  3. Despliega la app instrumentada en tu VM o como un pod en AKS.
  4. Observa en Dynatrace c贸mo se visualizan las trazas y m茅tricas en Application & Microservices.
  5. **Extra:** Genera carga en la app y explora los mapas de dependencias y correlaciones en Dynatrace.

---

### **5. Desaf铆o Extra: Automatizaci贸n IaC en Azure**

**Objetivo:** Automatizar la instalaci贸n de Dynatrace OneAgent y la configuraci贸n de integraciones en Azure usando Terraform o Bicep.

* **Pasos sugeridos:**

  1. Crea un peque帽o script Terraform o plantilla Bicep para desplegar una VM o cluster AKS en Azure.
  2. Incluye la instalaci贸n autom谩tica de Dynatrace OneAgent como una extensi贸n de la VM o como DaemonSet en AKS.
  3. Documenta el flujo, comparte el c贸digo fuente y explica c贸mo se conecta todo a Dynatrace.

---

##  **Entrega sugerida para estos retos**

* Capturas de dashboards, Smartscape, paneles de m茅tricas y alertas en Dynatrace.
* Ejemplo de archivos de configuraci贸n usados en Azure y Dynatrace.
* Mini resumen sobre el valor agregado de cada integraci贸n.
* Para el reto IaC, incluye el c贸digo fuente y gu铆a r谩pida de uso.

---

驴Quieres un reto a煤n m谩s t茅cnico sobre logs centralizados, Synthetic Monitoring o Security con Azure y Dynatrace?
驴O necesitas este contenido en formato Markdown paso a paso para tus estudiantes?
隆Solo dime!
